window.Ajax={url:"./index.rb",onreturn:null,send:function(e){0!=this.before_send(e)&&(e.ajx=1,this.onreturn=e.onreturn,delete e.onreturn,Flash.clean("Ajax.send"),Flash.message("Op\xe9ration en cours\u2026"),$.ajax({url:this.url,type:"POST",data:e,success:$.proxy(this.on_success,this),error:$.proxy(this.on_error,this)}))},on_success:function(e){return Flash.clean("Ajax.on_success"),this.traite_messages_retour(e),this.traite_css_retour(e.css),"function"==typeof this.onreturn&&this.onreturn(e),!0},on_error:function(e,r,n){Flash.clean("Ajax.on_error"),Flash.error(n)},before_send:function(){return!0},traite_messages_retour:function(e){"undefined"!=typeof e&&("undefined"!=typeof e.message&&(Flash.message(e.message),delete e.message),"undefined"!=typeof e.error&&(Flash.error(e.error),delete e.error),$("section#flash").css({position:"fixed",top:"8px",left:"30%"}))},traite_css_retour:function(e){"undefined"!=typeof e&&null!=e&&$.map(e,function(e){$("head").append("<link rel='stylesheet' type='text/css' href='"+e+"' charset='utf-8' />")})},submit_form:function(e,r){return this.on_submit_form(e,r)},on_submit_form:function(e,r){try{var n,t,r,s=$(e).serializeArray(),o=hash(s);if("undefined"!=typeof o.r&&(n=o.r.split("/")),!r&&(t="undefined"==typeof o.onreturn?n:o.onreturn.split("/"))){var i=t[0].capitalize(),u=t[1];r=$.proxy(window[i],u)}return o.onreturn=r,o.ajax="1",o.ajx="1",this.send(o),!1}catch(a){return console&&console.error(a),F.error("Une erreur est survenue : "+a),!1}}};